# Обработчик RSS-фида для Zavtracast

Проект для загрузки RSS-фида, его категоризации, создания новых RSS-фидов для каждой категории и загрузки их в Yandex Object Storage.

## Предварительные требования

Перед началом работы убедитесь, что вы соответствуете следующим требованиям:
- У вас есть компьютер с `Linux/MacOS/Windows`.
- У вас установлена последняя версия `Python 3`.
- У вас есть аккаунт Yandex Object Storage с доступом к S3-бакету.
- У вас установлен `pip` (обычно поставляется вместе с Python).

## Установка обработчика RSS-фида

Для установки обработчика RSS-фида выполните следующие шаги:

1. Клонируйте репозиторий на локальную машину:

```bash
git clone https://github.com/yourusername/rss-feed-processor.git
cd rss-feed-processor
```

2. Cоздайте виртуальное окружение:

```bash
python3 -m venv zavtracast
```

3. Активируйте виртуальное окружение:

На MacOS и Linux:

```bash
source zavtracast/bin/activate
```
На Windows:

```bash
.\venv\Scripts\activate
```

Утановите необходимые пакеты:

```bash
pip install -r requirements.txt
```

## Конфигурация

Создайте файл config.json в корневой директории проекта со следующей структурой:
```json
{
  "ACCESS_KEY": "ваш_access_key",
  "SECRET_KEY": "ваш_secret_key",
  "BUCKET_NAME": "имя_вашего_бакета",
  "ENDPOINT_URL": "https://storage.yandexcloud.net",
  "zavtracast_patreon_feed": "Ссылка на ваш RSS в патреоне"
}
```

Замените ваш_access_key, ваш_secret_key, и имя_вашего_бакета на ваши фактические данные доступа к Yandex Object Storage.
zavtracast_patreon_feed замените на вашу rss ссылку из [Patreon](https://www.patreon.com/zavtracast/membership)

# Запуск проекта
Чтобы запустить проект, выполните:
```bash
python main.py
```
Это загрузит исходный RSS-фид, сгруппирует подкасты и загрузит новые фиды в ваш S3 бакет в Yandex Object Storage.

## На Unix-подобных системах (включая Linux и macOS):
1. Откройте терминал.
2. Введите ```crontab -e``` для редактирования cron-задач для текущего пользователя.
3. Добавьте следующую строку в конец файла:

``` ruby
0 */2 * * * /path/to/your/venv/bin/python /path/to/your/rss-feed-processor/main.py >> /path/to/your/logfile.log 2>&1
```
Здесь /path/to/your/venv/bin/python — это путь к интерпретатору Python в вашем виртуальном окружении, /path/to/your/rss-feed-processor/main.py — это путь к вашему скрипту, а /path/to/your/logfile.log — это файл, куда будут записываться логи выполнения скрипта.
4. Сохраните файл и выйдите из редактора. Cron автоматически применит эти изменения.
## На Windows:
Вы можете использовать Планировщик задач для создания задачи с интервалом в два часа:

1. Откройте Планировщик задач (Task Scheduler).
2. Выберите "Создать задачу" (Create Task) в правой панели.
3. На вкладке "Общие" (General) задайте имя задачи.
4. Перейдите на вкладку "Триггеры" (Triggers), нажмите "Новый" (New) и настройте планировщик для запуска задачи каждые два часа.
5. На вкладке "Действия" (Actions) нажмите "Новый" (New), выберите "Запустить программу" (Start a program) и укажите путь к интерпретатору Python в вашем виртуальном окружении, а в качестве аргументов укажите путь к вашему скрипту main.py.
6. Настройте остальные параметры по вашему усмотрению и сохраните задачу.

Теперь скрипт будет автоматически запускаться каждые два часа.

Важно: Убедитесь, что пути к Python и скрипту указаны правильно. При запуске через планировщик задач Python должен быть установлен системно или путь к нему должен быть указан явно.

Не забывайте регулярно проверять логи выполнения, чтобы убедиться, что скрипт работает как ожидается.



# Участие в проекте

Для внесения своего вклада в проект:

1. Сделайте форк репозитория.
2. Создайте новую ветку.
3. Внесите изменения.
4. Отправьте их на рассмотрение через Pull Request.